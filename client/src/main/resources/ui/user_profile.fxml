<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.SVGPath?>

<VBox xmlns="http://javafx.com/javafx/21"
      xmlns:fx="http://javafx.com/fxml"
      fx:id="profileRoot"
      fx:controller="com.example.messenger.ui.controllers.UserProfileController"
      spacing="15.0"
      style="-fx-background-color: linear-gradient(to bottom right, #253745, #11212D); -fx-background-radius: 20; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.5), 20, 0, 0, 0);"
      maxWidth="500" maxHeight="700">

    <padding>
        <Insets top="20" right="20" bottom="20" left="20"/>
    </padding>

    <children>
        <HBox alignment="CENTER_LEFT" spacing="10">
            <Button fx:id="backButton" text="â† Back" onAction="#onBack" style="-fx-background-color: transparent; -fx-text-fill: #CCD0CF; -fx-font-weight: bold; -fx-cursor: hand;"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Label text="User Profile" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #CCD0CF;"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Button fx:id="editButton" onAction="#onEnableEdit" style="-fx-background-color: transparent; -fx-cursor: hand;">
                <graphic>
                    <SVGPath content="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" fill="#CCD0CF"/>
                </graphic>
                <tooltip><Tooltip text="Edit Profile"/></tooltip>
            </Button>
        </HBox>

        <Separator opacity="0.3"/>

        <HBox spacing="20.0" alignment="CENTER_LEFT">
            <children>
                <VBox spacing="10.0" alignment="TOP_CENTER">
                    <children>
                        <StackPane style="-fx-border-color: #9BA8AB; -fx-border-radius: 5; -fx-padding: 2;">
                            <ImageView fx:id="avatarImageView" fitWidth="100.0" fitHeight="100.0" preserveRatio="true"/>
                        </StackPane>
                        <Button fx:id="chooseAvatarButton" text="Change Photo" onAction="#onChooseAvatar" visible="false" managed="false" styleClass="orbit-button"/>
                    </children>
                </VBox>

                <VBox spacing="10.0" HBox.hgrow="ALWAYS">
                    <Label fx:id="errorLabel" textFill="#e74c3c" wrapText="true" visible="false" managed="false" style="-fx-font-weight: bold;"/>
                    <GridPane hgap="10.0" vgap="10.0">
                        <columnConstraints>
                            <ColumnConstraints minWidth="60.0"/>
                            <ColumnConstraints hgrow="ALWAYS"/>
                        </columnConstraints>
                        <children>
                            <Label text="Name:" style="-fx-text-fill: #9BA8AB;" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                            <TextField fx:id="nameField" editable="false" style="-fx-background-color: transparent; -fx-text-fill: white; -fx-border-width: 0 0 1 0; -fx-border-color: #4A5C6A;" GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                            <Label text="Email:" style="-fx-text-fill: #9BA8AB;" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                            <Label fx:id="emailLabel" style="-fx-text-fill: #CCD0CF;" GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                            <Label text="ID:" style="-fx-text-fill: #9BA8AB;" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                            <TextField fx:id="idField" editable="false" style="-fx-background-color: transparent; -fx-text-fill: #6c757d; -fx-font-size: 11px;" GridPane.rowIndex="2" GridPane.columnIndex="1"/>
                        </children>
                    </GridPane>
                </VBox>
            </children>
        </HBox>

        <Separator opacity="0.3"/>

        <Button text="View Statistics &amp; Activity" onAction="#onShowStatistics"
                maxWidth="Infinity"
                style="-fx-background-color: #34495e; -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand; -fx-background-radius: 10; -fx-padding: 10;"/>

        <Separator opacity="0.1"/>

        <VBox spacing="10" VBox.vgrow="ALWAYS" alignment="CENTER" style="-fx-background-color: #11212D; -fx-background-radius: 10; -fx-padding: 10;">
            <HBox alignment="CENTER" spacing="15">
                <Label text="Minesweeper" style="-fx-text-fill: #9BA8AB; -fx-font-weight: bold;"/>
                <Button text="Restart" onAction="#startNewGame" style="-fx-background-color: #4A5C6A; -fx-text-fill: white; -fx-font-size: 10px; -fx-cursor: hand;"/>
            </HBox>
            <GridPane fx:id="gameGrid" alignment="CENTER" hgap="2" vgap="2" />
            <Label fx:id="gameStatusLabel" text="" style="-fx-text-fill: #e74c3c; -fx-font-weight: bold;"/>
        </VBox>

        <HBox fx:id="actionButtonsBox" spacing="10.0" alignment="CENTER_RIGHT" visible="false" managed="false">
            <children>
                <Button fx:id="cancelButton" text="Cancel" onAction="#onCancelEdit" style="-fx-background-color: #4A5C6A; -fx-text-fill: white;"/>
                <Button fx:id="saveButton" text="Save" onAction="#onSave" defaultButton="true" style="-fx-background-color: #3b82f6; -fx-text-fill: white; -fx-font-weight: bold;"/>
            </children>
        </HBox>
    </children>
</VBox>